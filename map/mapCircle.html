<!DOCTYPE html>
<html>
  <head>
    <style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 100%;
      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
  </head>
  <body>
    <div id="map"></div>
    <script src="amountToMap_data.js"></script>
    <script>
      var map;

        
        //Import the JobAmount data according to cities
        // var cityMapData = require('amountToMap_data.json');
        console.log(cityMapData);

        function initMap() {
        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 4,
          center: {lat: 41.850033, lng: -87.6500523},
          mapTypeId: 'terrain'
        });

        circle_list = {}
        for(var city in cityMapData) {
        var Circle = {
            path: google.maps.SymbolPath.CIRCLE,
            fillOpacity: .35,
            fillColor: "#BA3075",
            strokeOpacity: .8,
            strokeColor: "white",
            strokeWeight: .5,
            scale: Math.sqrt(cityMapData[city].amount)/10,
            // radius: Math.sqrt(cityMapData[city].amount) * 100000
        };
        circle_list[city] = Circle
        }
        for(var city in cityMapData) {
            var latLng = new google.maps.LatLng(cityMapData[city].center.lat, cityMapData[city].center.lng);
            // var distanceInkm = Math.sqrt(cityMapData[city].amount) * 1000;
            var radius_value = Math.sqrt(cityMapData[city].amount) * 1000;
            // Circle.setRadius(radius: parseFloat(radius_value));
            console.log(circle_list[city]); 
            // console.log(latLng);
            var newCircle = new google.maps.Marker({
            icon: circle_list[city],
            position: latLng,
            // draggable: true,
            animation: google.maps.Animation.DROP,
            title:city + ": " + cityMapData[city].amount.toString() + " jobs"
            
        
            // setRadius(radius:Math.sqrt(cityMapData[city].amount) * 1000)
            // radius: Math.sqrt(cityMapData[city].amount) * 1000
        });
        newCircle.setMap(map);
        }
        

      }

    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCGX8Pow3ilEfk1CGFc7Ubw1ykeFUdLYWg&language=en&callback=initMap">
    </script>
  </body>
</html>